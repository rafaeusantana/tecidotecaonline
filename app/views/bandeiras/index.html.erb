<script>
	habilitarCampo = function(id) {
		campo = document.getElementById(id);
		campo.parentElement.className = campo.parentElement.className.replace("first-invisible", "");
	}
</script>


<h1>Lista de Bandeiras</h1>

Filtrar por: 
<%= select_tag(:city_id, options_for_select([['Selecione um campo',0],['Tipo de Bandeira', 'item_tipo_bandeira_id'], ['Tipo de Aquisição','item_tipo_aquisicao'], ['Matéria prima','materia_prima_ids'], ['Ligamento','ligamento_ids'], ['Fio Título','fio_titulo_ids'],['Fabricante','item_fabricante_id'],['Coleção','item_colecao_id'], ['Ano da coleção', 'item_ano_colecao'], ['Especificações', 'item_especificacoes'], ['Padronagem Design','padronagem_design_ids'], ['Uso do Tecido','uso_tecido_ids'], ['Cor Predominante','item_cor_id'], ['Técnica Design','tecnica_design_ids'], ['Acabamento','item_acabamento_id'], ['Textura','item_textura_id'], ['Análise de cor','item_analise_cor']]),  :onchange => 'habilitarCampo(this.value)') %>

<%= form_for(@bandeira, :url => { :controller => "bandeiras" }, :html => { :method => 'GET' }) do |f| %>
<br />

	<div class="form-group  <%=params[:item].nil?||params[:item][:tipo_bandeira_id].nil?||params[:item][:tipo_bandeira_id]=='' ? 'first-invisible':''%>">
	    <%= f.label :tipo_de_bandeira_id %>
	    <%= f.select :tipo_bandeira_id, (Bandeira.all.map{|c| [c.tipo, c.id]} << ["- Selecione", nil]).sort, {}, :class=>"form-control" %>
	  </div>

	  <div class="form-group <%=params[:item].nil?||params[:item][:localizacao].nil?||params[:item][:localizacao]=='' ? 'first-invisible':''%>">
	    <%= f.label :localização %>
	    <%= f.text_field :localizacao, :class=>"form-control input-sm" %>
	  </div>

	  <div class="form-group <%=params[:item].nil?||params[:item][:tipo_aquisicao].nil?||params[:item][:tipo_aquisicao]=='' ? 'first-invisible':''%>">
	    <%= f.label :tipo_de_aquisicão %>
	    <%= f.text_field :tipo_aquisicao, :class=>"form-control input-sm" %>
	  </div>

	  <div class="form-group <%=params[:item].nil?||params[:item][:materia_prima_ids].nil?||params[:item][:materia_prima_ids]==''||params[:item][:materia_prima_ids].count<2 ? 'first-invisible':''%>">
	    <%= f.label :matéria_prima %>
	    <%= f.select :materia_prima_ids, MateriaPrima.all.collect {|x| [x.nome, x.id]}, {}, :multiple => true, :class=>"form-control input-sm", :id=>'materia_prima_ids' %>
	  </div>

	  <div class="form-group <%=params[:item].nil?||params[:item][:materia_prima_ids].nil?||params[:item][:materia_prima_ids]==''||params[:item][:materia_prima_ids].count<2 ? 'first-invisible':''%>">
	    <%= f.label :ligamento %>
	    <%= f.select :ligamento_ids, Ligamento.all.collect {|x| [x.tipo, x.id]}, {}, :multiple => true, :class=>"form-control input-sm", :id=>'ligamento_ids' %>
	  </div>

	  <div class="form-group <%=params[:item].nil?||params[:item][:materia_prima_ids].nil?||params[:item][:materia_prima_ids]==''||params[:item][:materia_prima_ids].count<2 ? 'first-invisible':''%>">
	    <%= f.label :fio_titulo %>
	    <%= f.select :fio_titulo_ids, FioTitulo.all.collect {|x| [x.tipo, x.id]}, {}, :multiple => true, :class=>"form-control input-sm", :id=>'fio_titulo_ids' %>
	  </div>

	<div class="form-group  <%=params[:item].nil?||params[:item][:fabricante_id].nil?||params[:item][:fabricante_id]=='' ? 'first-invisible':''%>">
	    <%= f.label :fabricante_id %>
	    <%= f.select :fabricante_id, (Fabricante.all.map{|c| [c.nome, c.id]} << ["- Selecione", nil]).sort, {}, :class=>"form-control" %>
	  </div>

	<div class="form-group  <%=params[:item].nil?||params[:item][:colecao_id].nil?||params[:item][:fab_id]=='' ? 'first-invisible':''%>">
	    <%= f.label :colecao_id %>
	    <%= f.select :colecao_id, (Colecao.all.map{|c| [c.nome, c.id]} << ["- Selecione", nil]).sort, {}, :class=>"form-control" %>
	  </div>

	  <div class="form-group <%=params[:item].nil?||params[:item][:ano_colecao].nil?||params[:item][:ano_colecao]=='' ? 'first-invisible':''%>">
	    <%= f.label :ano_da_coleção %>
	    <%= f.text_field :ano_colecao, :class=>"form-control input-sm" %>
	  </div>

	  <div class="form-group <%=params[:item].nil?||params[:item][:especificacoes].nil?||params[:item][:especificacoes]=='' ? 'first-invisible':''%>">
	    <%= f.label :especificações %>
	    <%= f.text_field :especificacoes, :class=>"form-control input-sm" %>
	  </div>

	  <div class="form-group <%=params[:item].nil?||params[:item][:padronagem_design_ids].nil?||params[:item][:padronagem_design_ids]==''||params[:item][:materia_prima_ids].count<2 ? 'first-invisible':''%>">
	    <%= f.label :padronagem_design %>
	    <%= f.select :padronagem_design_ids, PadronagemDesign.all.collect {|x| [x.tipo, x.id]}, {}, :multiple => true, :class=>"form-control input-sm", :id=>'padronagem_design_ids' %>
	  </div>

	  <div class="form-group <%=params[:item].nil?||params[:item][:materia_prima_ids].nil?||params[:item][:materia_prima_ids]==''||params[:item][:materia_prima_ids].count<2 ? 'first-invisible':''%>">
	    <%= f.label :uso_tecido %>
	    <%= f.select :uso_tecido_ids, UsoTecido.all.collect {|x| [x.tipo, x.id]}, {}, :multiple => true, :class=>"form-control input-sm", :id=>'uso_tecido_ids' %>
	  </div>

	<div class="form-group  <%=params[:item].nil?||params[:item][:cor_id].nil?||params[:item][:cor_id]=='' ? 'first-invisible':''%>">
	    <%= f.label :cor_id %>
	    <%= f.select :cor_id, (Cor.all.map{|c| [c.nome, c.id]} << ["- Selecione", nil]).sort, {}, :class=>"form-control" %>
	  </div>


	  <div class="form-group <%=params[:item].nil?||params[:item][:materia_prima_ids].nil?||params[:item][:materia_prima_ids]==''||params[:item][:materia_prima_ids].count<2 ? 'first-invisible':''%>">
	    <%= f.label :tecnica_design %>
	    <%= f.select :tecnica_design_ids, TecnicaDesign.all.collect {|x| [x.nome, x.id]}, {}, :multiple => true, :class=>"form-control input-sm", :id=>'tecnica_design_ids' %>
	  </div>

	<div class="form-group  <%=params[:item].nil?||params[:item][:acabamento_id].nil?||params[:item][:acabamento_id]=='' ? 'first-invisible':''%>">
	    <%= f.label :acabamento_id %>
	    <%= f.select :acabamento_id, (Acabamento.all.map{|c| [c.tipo, c.id]} << ["- Selecione", nil]).sort, {}, :class=>"form-control" %>
	  </div>

	<div class="form-group  <%=params[:item].nil?||params[:item][:textura_id].nil?||params[:item][:textura_id]=='' ? 'first-invisible':''%>">
	    <%= f.label :textura_id %>
	    <%= f.select :textura_id, (Textura.all.map{|c| [c.tipo, c.id]} << ["- Selecione", nil]).sort, {}, :class=>"form-control" %>
	  </div>

	  <div class="form-group <%=params[:item].nil?||params[:item][:analise_cor].nil?||params[:item][:analise_cor]=='' ? 'first-invisible':''%>">
	    <%= f.label :análise_de_cor %>
	    <%= f.text_field :analise_cor, :class=>"form-control input-sm" %>
	  </div>

<br />
<div class="actions">
    <%= f.submit :class=>"btn btn-primary", :value=>"Buscar" %>
</div>
<% end %>

<hr />

<table class="table table-striped">
  <thead>
    <tr>
      <th>Suporte</th>
      <th>Localização</th>
      <th>Fabricante</th>
      <th colspan="8"></th>
    </tr>
  </thead>

  <tbody>
    <% @bandeiras.each do |bandeira| %>
      <tr>
        <td><%= Suporte.find(bandeira.suporte_id).nome %></td>
        <td><%= bandeira.localizacao %></td>
        <td><%= bandeira.fabricante.nome %></td>
        <td><%= link_to 'Mostrar', bandeira_path(bandeira) %></td>
        <td><%= link_to 'Editar', edit_bandeira_path(bandeira) %></td>
        <td><%= link_to 'Excluir', bandeira_path(bandeira), method: :delete, data: { confirm: 'Você tem certeza?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= link_to 'Adicionar bandeira', new_bandeira_path %>
